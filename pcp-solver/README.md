# ポスト対応問題ソルバー

このディレクトリには、ポスト対応問題（Post Correspondence Problem）を解くためのPython実行環境とスクリプトが含まれています。

## ファイル構成

```
pcp-solver/
├── README.md           # このファイル
├── requirements.txt    # Python依存パッケージ
├── setup.py           # 環境セットアップスクリプト
├── pcp_solver.py      # メインの探索スクリプト
└── venv/              # 仮想環境（setup.py実行後に作成）
```

## セットアップ方法

1. **仮想環境の作成とパッケージインストール**
   ```bash
   cd pcp-solver
   python setup.py
   ```

2. **仮想環境のアクティベート**
   
   **Windows:**
   ```cmd
   venv\Scripts\activate.bat
   ```
   
   **Unix/Linux/Mac:**
   ```bash
   source venv/bin/activate
   ```

## 使用方法

### 基本的な実行

```bash
python pcp_solver.py
```

### プログラムの機能

1. **問題選択メニュー**
   - 簡単な問題
   - 中程度の問題  
   - 難しい問題
   - 寿司問題（絵文字使用）
   - カスタム問題入力
   
2. **探索パラメータ設定**
   - 最大探索深度の指定（デフォルト: 20）

3. **解の表示**
   - 解が見つかった場合、使用したドミノの順序
   - ステップバイステップの構築過程
   - 最終的な文字列の一致確認

### カスタム問題の入力例

```
ドミノ 1: abc,ab
ドミノ 2: ca,a  
ドミノ 3: acc,ba
（空行で終了）
```

## ポスト対応問題とは

ポスト対応問題は、以下の条件を満たすドミノの配列が存在するかを判定する計算複雑性理論の古典的問題です：

- **入力**: ドミノのセット（各ドミノには上部・下部に文字列が記載）
- **目標**: ドミノを任意の順序・回数で使用して、上部文字列と下部文字列が一致する配列を作成
- **制約**: 各ドミノは何回でも使用可能

### 例

ドミノセット: `[(a, aa), (aa, a)]`

解: ドミノ1, ドミノ2, ドミノ2を使用
```
上部: a + aa + aa = aaaa
下部: aa + a + a = aaaa
```

## アルゴリズム

このソルバーは以下の技術を使用しています：

1. **深さ優先探索 (DFS)**
2. **ブランチング**: 不可能な経路の早期打ち切り
3. **重複状態回避**: 訪問済み状態の記録
4. **プルーニング**: 接頭辞条件による探索空間削減

## 実行例

```bash
$ python pcp_solver.py

=== ポスト対応問題ソルバー ===

問題を選択してください:
1. 簡単な問題
2. 中程度の問題
3. 難しい問題
4. 寿司問題
5. カスタム問題を入力
0. 終了

選択: 1

最大探索深度を入力してください (デフォルト: 20): 

ドミノ: [('a', 'aa'), ('aa', 'a')]
最大探索深度: 20
探索開始...
解が見つかりました: [1, 0, 0]

=== 解の詳細 ===
ステップ 1: ドミノ2 ('aa', 'a')
  上部: aa
  下部: a

ステップ 2: ドミノ1 ('a', 'aa')  
  上部: aaa
  下部: aaa

最終結果:
上部: aaa
下部: aaa
一致: ✓
```

## 注意事項

- ポスト対応問題は一般に決定不能問題です
- このソルバーは有限時間での近似解を提供します
- 最大探索深度を超える解は見つけられません
- 複雑な問題では実行時間が長くなる場合があります